---
import IntlBaseLayout from "@/layouts/IntlBaseLayout.astro";
import { getPageTranslations, getLocaleStaticPaths } from "@/i18n/i18n";
import Navigation from "@/components/Navigation.astro";
import Hero from "@/components/Hero.astro";
import About from "@/components/About.astro";
import Projects from "@/components/Projects.astro";
import Blog from "@/components/Blog.astro";
import Footer from "@/components/Footer.astro";

// Generate static paths for all supported locales
export async function getStaticPaths() {
  return getLocaleStaticPaths();
}

// Get locale from dynamic route params (IntlBaseLayout will handle validation)
const { locale } = Astro.params;

// Get the translation function for this page
const { t } = await getPageTranslations(locale, ["common", "ui"]);
---

<IntlBaseLayout locale={locale} pageNS={["common", "ui"]}>
  <!-- Navigation -->
  <Navigation locale={locale} />

  <!-- Main Content -->
  <main>
    <!-- Hero Section -->
    <Hero locale={locale} />

    <!-- About Section -->
    <About locale={locale} />

    <!-- Projects Section -->
    <Projects locale={locale} />

    <!-- Blog Section -->
    <Blog locale={locale} />
  </main>

  <!-- Footer -->
  <Footer locale={locale} />
</IntlBaseLayout>
